{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://www.buildingenvelopedata.org/schemas/stakeholder.json",
  "title": "Stakeholder",
  "description": "Institution or person",
  "$defs": {
    "contact": {
      "title": "Contact information",
      "type": "object",
      "properties": {
        "phone": {
          "type": "string",
          "title": "Phone number"
        },
        "address": {
          "type": "string",
          "title": "Postal address"
        },
        "email": {
          "type": "string",
          "format": "email",
          "title": "E-mail address"
        },
        "website": {
          "$ref": "common.json#/$defs/webAddress",
          "title": "Website"
        }
      },
      "additionalProperties": false,
      "required": [],
      "minProperties": 1
    },
    "accreditation": {
      "type": "object",
      "properties": {
        "standard": {
          "description": "Standard for which an institution is accredited.",
          "$ref": "common.json#/$defs/standard"
        },
        "approvals": {
          "description": "Approvals that the institution is accredited according to the standard.",
          "$ref": "common.json#/$defs/approvals"
        }
      },
      "additionalProperties": false,
      "required": ["standard", "approvals"]
    },
    "institution": {
      "title": "Institution",
      "type": "object",
      "properties": {
        "id": {
          "title": "Identifier",
          "$ref": "identifier.json#/$defs/central"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "abbreviation": {
          "title": "Abbreviation",
          "$ref": "string.json#/$defs/abbreviation"
        },
        "description": {
          "title": "Description",
          "type": "string"
        },
        "gnuPgKeys": {
          "type": "array",
          "items": {
            "title": "GnuPG keys",
            "description": "Used for digital signatures in approvals.",
            "type": "string"
          },
          "minItems": 0
        },
        "contact": {
          "title": "Contact information",
          "$ref": "#/$defs/contact"
        },
        "accreditations": {
          "title": "Accreditations",
          "description": "Standards for which the institution is accredited.",
          "type": "array",
          "items": {
            "$ref": "#/$defs/accreditation"
          },
          "minItems": 0
        },
        "affiliations": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "kind": {
                "title": "Kind",
                "type": "string"
              },
              "person": {
                "title": "Person",
                "$ref": "#/$defs/person"
              }
            },
            "additionalProperties": false,
            "required": ["name", "person"]
          },
          "minItems": 0
        }
      },
      "additionalProperties": false,
      "required": ["id"]
    },
    "person": {
      "title": "Person",
      "type": "object",
      "properties": {
        "id": {
          "title": "Identifier",
          "$ref": "identifier.json#/$defs/central"
        },
        "fullName": {
          "title": "Full name",
          "type": "string"
        },
        "affiliation": {
          "title": "Affiliation",
          "type": "object",
          "properties": {
            "kind": {
              "title": "Kind",
              "type": "string"
            },
            "institution": {
              "title": "Institution",
              "$ref": "#/$defs/institution"
            }
          },
          "additionalProperties": false,
          "required": ["name", "institution"]
        },
        "contact": {
          "title": "Contact information",
          "$ref": "#/$defs/contact"
        }
      },
      "additionalProperties": false,
      "required": ["id"]
    },
    "stakeholder": {
      "anyOf": [
        {
          "$ref": "#/$defs/institution"
        },
        {
          "$ref": "#/$defs/person"
        }
      ]
    }
  },
  "$ref": "#/$defs/stakeholder"
}
